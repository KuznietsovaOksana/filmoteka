{"mappings":"oeAIAA,EAAA,SCJA,IAAAC,EAAAD,EAAA,S,wBAIA,MAAME,EAAQC,SAASC,cAAc,UAC/BC,EAAUF,SAASC,cAAc,UAGjCE,EAAcH,SAASC,cAAc,UACrCG,EAAeJ,SAASC,cAAc,sBACtCI,EAAUL,SAASC,cAAc,gBACjCK,EAAaN,SAASC,cAAc,aAEpCM,EAAuBP,SAASQ,eAAe,oBAC/CC,EAAsBT,SAASQ,eAAe,mBAIpD,EAAAV,EAAAY,gBAIAH,EAAqBI,iBAAiB,SAoBM,WACxC,IAAIC,EAAeC,KAAKC,MAAMC,aAAaC,QA5BnB,kBA6BxBC,QAAQC,IAAIN,GACZO,EAAgBP,E,IAtBpBH,EAAoBE,iBAAiB,SA0BE,WACnC,IAAIS,EAAcP,KAAKC,MAAMC,aAAaC,QAlCpB,mBAmCtBC,QAAQC,IAAIE,GACZD,EAAgBC,E,IA1BMjB,EAAdQ,iBAAiB,SAmD7BU,eAAgCC,GAC5BA,EAAMC,iBACFD,EAAME,OAAOC,QAAQ,QACrBpB,EAAQqB,UAAUC,OAAO,aACzBvB,EAAaO,iBAAiB,QAASiB,GACvCtB,EAAWK,iBAAiB,QAASkB,GACrCC,OAAOnB,iBAAiB,UAAWoB,GACnCd,QAAQC,IAAI,qB,IAlDO,MAArBc,EAAoBnB,KAAKC,MAAMC,aAAaC,QAnBtB,kBAyCa,SAAhCG,EAAgBc,GACrB,MAAMC,EAASD,EAAME,KAAIC,IAKF,IACZA,EACHC,YAAa,kCAAkCD,EAAKC,cACpDC,OAAQF,EAAKG,WACbC,aAAcJ,EAAKI,aAAaC,MAAM,EAAG,OAKjDvC,EAAQwC,UAAY,GACpB3C,EAAM2C,WAAY,EAAAC,EAAAC,SAAaV,E,CAiBnC,SAASN,IACLvB,EAAQqB,UAAUmB,IAAI,aACtBzC,EAAa0C,oBAAoB,QAASlB,GAC1CtB,EAAWwC,oBAAoB,QAASjB,GACxCC,OAAOgB,oBAAoB,UAAWf,E,CAG1C,SAASF,EAAkBP,GACnBA,EAAME,SAAWlB,GACjBsB,G,CAIR,SAASG,EAAcT,GACA,WAAfA,EAAMyB,MACNnB,G,CArEyB,IAA7BI,EAAkBgB,QAClB7B,EAAgBa","sources":["src/library.js","src/js/library-cards.js"],"sourcesContent":["// import cardTemplate from './templates/film-card.hbs';\n// import './js/pagination';\n// import './js/to-top';\n// import './js/preloader';\nimport './js/theme-switch';\nimport './js/library-cards';\n","import { loaderRender } from './preloader';\nimport cardTemplate from '../templates/film-card.hbs';\nimport genres from './genres.json';\n\nconst cards = document.querySelector('.cards');\nconst emptyEl = document.querySelector('.empty');\n\n// const modalOpenEl = document.querySelector('[data-modal-open]');\nconst modalOpenEl = document.querySelector('.cards');\nconst modalCloseEl = document.querySelector('[data-modal-close]');\nconst modalEl = document.querySelector('[data-modal]');\nconst backdropEl = document.querySelector('.backdrop');\n\nconst watchedFilmListBtnEl = document.getElementById('js-WatchedButton');\nconst queuedFilmListBtnEl = document.getElementById('js-QueueButton');\nconst WATCHED_STORAGE_KEY = \"watched films\";\nconst QUEUE_STORAGE_KEY = \"films in queue\"\n\nloaderRender();\n\n\n\nwatchedFilmListBtnEl.addEventListener('click', onLSLoadWatched);\nqueuedFilmListBtnEl.addEventListener('click', onLSLoadQueue);\n\n// слухач на батьківський UL карток\nmodalOpenEl.addEventListener('click', onModalOpenClick);\n\n\n\n\n\n// Перевірка на наявність даних в ЛокалСторедж\n// Якщо є дані, тоді рендерим картки\nconst LS_WWATCHED_ARRAY = JSON.parse(localStorage.getItem(WATCHED_STORAGE_KEY));\nif (LS_WWATCHED_ARRAY.length !== 0) {\n    renderFilmCards(LS_WWATCHED_ARRAY);\n}\n\n\n\n// Функція витягує переглянуті фільми з ЛокалСторедж\nfunction onLSLoadWatched() {\n    let watchedFilms = JSON.parse(localStorage.getItem(WATCHED_STORAGE_KEY));\n    console.log(watchedFilms);\n    renderFilmCards(watchedFilms);\n}\n\n// Функція витягує фільми з черги з ЛокалСторедж\nfunction onLSLoadQueue() {\n    let queuedFilms = JSON.parse(localStorage.getItem(QUEUE_STORAGE_KEY))\n    console.log(queuedFilms);\n    renderFilmCards(queuedFilms);\n}\n\n// Функція, що підготовлює дані в картку для рендеру\nfunction renderFilmCards(films) {\n    const markup = films.map(film => {\n        // console.log(film);\n        // console.log(film.filmGenres);\n\n        // Формую підготовлений об'єкт даних для закидання в handlebar\n        const editedFilm = {\n            ...film,\n            poster_path: `https://image.tmdb.org/t/p/w500${film.poster_path}`,\n            genres: film.filmGenres,\n            release_date: film.release_date.slice(0, 4),\n        };\n        return editedFilm;\n    });\n\n    emptyEl.innerHTML = '';\n    cards.innerHTML = cardTemplate(markup);\n}\n\n\n// Функція відкриття модалки\nasync function onModalOpenClick(event) {\n    event.preventDefault();\n    if (event.target.closest('li')) {\n        modalEl.classList.remove('is-hidden');\n        modalCloseEl.addEventListener('click', onModalCloseClick);\n        backdropEl.addEventListener('click', onBackdropElClick);\n        window.addEventListener('keydown', onEscBtnClick);\n        console.log(\"I clicked on card\");\n    }\n}\n\n\nfunction onModalCloseClick() {\n    modalEl.classList.add('is-hidden');\n    modalCloseEl.removeEventListener('click', onModalCloseClick);\n    backdropEl.removeEventListener('click', onBackdropElClick);\n    window.removeEventListener('keydown', onEscBtnClick);\n}\n\nfunction onBackdropElClick(event) {\n    if (event.target === backdropEl) {\n        onModalCloseClick();\n    }\n}\n\nfunction onEscBtnClick(event) {\n    if (event.code === 'Escape') {\n        onModalCloseClick();\n    }\n}\n"],"names":["parcelRequire","$ioBS9","$120d9dea778dffdf$var$cards","document","querySelector","$120d9dea778dffdf$var$emptyEl","$120d9dea778dffdf$var$modalOpenEl","$120d9dea778dffdf$var$modalCloseEl","$120d9dea778dffdf$var$modalEl","$120d9dea778dffdf$var$backdropEl","$120d9dea778dffdf$var$watchedFilmListBtnEl","getElementById","$120d9dea778dffdf$var$queuedFilmListBtnEl","loaderRender","addEventListener","watchedFilms","JSON","parse","localStorage","getItem","console","log","$120d9dea778dffdf$var$renderFilmCards","queuedFilms","async","event","preventDefault","target","closest","classList","remove","$120d9dea778dffdf$var$onModalCloseClick","$120d9dea778dffdf$var$onBackdropElClick","window","$120d9dea778dffdf$var$onEscBtnClick","$120d9dea778dffdf$var$LS_WWATCHED_ARRAY","films","markup","map","film","poster_path","genres","filmGenres","release_date","slice","innerHTML","$kW34H","default","add","removeEventListener","code","length"],"version":3,"file":"library.7530a65a.js.map"}