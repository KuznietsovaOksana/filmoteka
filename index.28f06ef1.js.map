{"mappings":"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","sources":["src/js/home-page-loading.js","src/js/genres.json","src/js/team-modal.js","src/js/to-top.js"],"sourcesContent":["import { MovieDB } from './api-service';\nimport cardTemplate from '../templates/film-card.hbs';\nimport genres from './genres.json';\nimport { loaderRender } from './preloader';\nimport { numberConverter } from './prepare-number';\n\nconst cards = document.querySelector('.cards');\nconst searchFormEl = document.querySelector('#search-form');\nconst searchFieldEl = document.querySelector('.search-field');\nconst warningField = document.querySelector('.js-warning');\nconst searchResField = document.querySelector('.js-search-results');\nlet globalCurrentPage = 1;\n\nconst movieDB = new MovieDB();\n\nonHomePageLoad();\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nasync function onSearchFormSubmit(event, globalCurrentPage) {\n  event.preventDefault();\n  cards.dataset.position = 'searched'\n\n  const inputSearchEl = event.target.elements.query.value.trim();\n  console.log(inputSearchEl);\n  if (inputSearchEl.length === 0) {\n    searchResField.textContent = 'Please enter your request';\n    setTimeout(() => {\n      searchResField.textContent = '';\n    }, 3000);\n\n    event.currentTarget.reset();\n    return;\n  }\n\n  movieDB.searchQuery = event.target.elements.query.value;\n\n  anotherFetchSearch(globalCurrentPage);\n\n}\n\nasync function anotherFetchSearch(globalCurrentPage) {\n  try {\n    const { data } = await movieDB.fetchSearch(globalCurrentPage);\n\n    let fetchCurrentPage = data.page;\n    let fetchTotalPages = data.total_pages;\n    paginationMarkup(fetchCurrentPage, fetchTotalPages);\n\n    searchFieldEl.value = '';\n    console.log(data.results);\n    if (data.results.length === 0) {\n      warningField.textContent =\n        'Search result not successful. Enter the correct movie name and try again';\n      setTimeout(() => {\n        warningField.textContent = '';\n      }, 3000);\n\n      return;\n    }\n    renderFilmCards(data.results);\n    return data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n\n\n\nexport async function onHomePageLoad() {\n\n  console.log(cards);\n  cards.dataset.position = 'trends'\n\n  try {\n    const { data } = await movieDB.fetchTrendMovies(globalCurrentPage);\n\n\n    let fetchCurrentPage = data.page;\n    let fetchTotalPages = data.total_pages;\n    paginationMarkup(fetchCurrentPage, fetchTotalPages);\n\n\n    if (data) {\n      loaderRender();\n    }\n    renderFilmCards(data.results);\n    return data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport function renderFilmCards(films) {\n  const markup = films.map(film => {\n    // Повертаю масив текстових жанрів до конкретного фільму\n    const newGenres = film.genre_ids.map(id => {\n      return genres.genres\n        .map(jsonID => {\n          if (jsonID.id === id) {\n            return jsonID.name;\n          }\n        })\n        .join('');\n    });\n\n    // Формую стрічку із жанрами для відображення в картці\n    let genreStr = '';\n\n    if (newGenres.length >= 3) {\n      const strBegin = newGenres.slice(0, 2).join(', ');\n      genreStr = strBegin + ', Other';\n    } else {\n      genreStr = newGenres.join(', ');\n    }\n\n    const rating = numberConverter(film.vote_average);\n\n    // Формую підготовлений об'єкт даних для закидання в handlebar\n    const editedFilm = {\n      ...film,\n      poster_path: `https://image.tmdb.org/t/p/w500${film.poster_path}`,\n      genres: genreStr,\n      release_date: film.release_date.slice(0, 4),\n      vote_average: rating,\n    };\n    return editedFilm;\n  });\n  cards.innerHTML = cardTemplate(markup);\n}\n\n\n\n\n// Добираємся до пагінації результатів пошуку\n\nexport function paginationMarkup(currentPage, allPages) {\n  let markup = '';\n  let beforeTwoPage = currentPage - 2;\n  let beforePage = currentPage - 1;\n  let afterPage = currentPage + 1;\n  let afterTwoPage = currentPage + 2;\n  globalCurrentPage = currentPage;\n\n  if (currentPage > 1) {\n    markup += `<li class=\"pagination__item slider-arrow prev\">&#129144</li>`;\n    markup += `<li class=\"pagination__item\">1</li>`;\n  }\n  if (currentPage > 4) {\n    markup += `<li class=\"pagination__item dots\">...</li>`;\n  }\n  if (currentPage > 3) {\n    markup += `<li class=\"pagination__item\">${beforeTwoPage}</li>`;\n  }\n  if (currentPage > 2) {\n    markup += `<li class=\"pagination__item\">${beforePage}</li>`;\n  }\n  markup += `<li class=\"pagination__item pagination__item--current\">${currentPage}</li>`;\n\n  if (allPages - 1 > currentPage) {\n    markup += `<li class=\"pagination__item\">${afterPage}</li>`;\n  }\n  if (allPages - 2 > currentPage) {\n    markup += `<li class=\"pagination__item\">${afterTwoPage}</li>`;\n  }\n  if (allPages - 3 > currentPage) {\n    markup += `<li class=\"pagination__item dots\">...</li>`;\n  }\n  if (allPages > currentPage) {\n    markup += `<li class=\"pagination__item\">${allPages}</li>`;\n    markup += `<li class=\"pagination__item slider-arrow next\">&#129146</li>`;\n  }\n  paginationBox.innerHTML = markup;\n}\n\nconst paginationBox = document.querySelector('.pagination__list');\n\npaginationBox.addEventListener('click', onPaginationHomeClick);\n\n// paginationMarkup();\n\nasync function onPaginationHomeClick(event) {\n  if (event.target.nodeName !== 'LI') {\n    return;\n  }\n  if (event.target.textContent === '...') {\n    return;\n  }\n  if (event.target.textContent === '🡸') {\n    if (cards.dataset.position === 'trends') {\n      onHomePageLoad((globalCurrentPage -= 1)).then(data => {\n        renderFilmCards(data.results);\n        paginationMarkup(data.page, data.total_pages);\n      });\n      return;\n    }\n    if (cards.dataset.position === 'searched') {\n      console.log('searchres click next');\n      anotherFetchSearch((globalCurrentPage -= 1)).then(data => {\n        renderFilmCards(data.results);\n        paginationMarkup(data.page, data.total_pages);\n      });\n      return;\n    }\n  }\n  if (event.target.textContent === '🡺') {\n    if (cards.dataset.position === 'trends') {\n      onHomePageLoad((globalCurrentPage += 1)).then(data => {\n        renderFilmCards(data.results);\n        paginationMarkup(data.page, data.total_pages);\n      });\n      return;\n    }\n    if (cards.dataset.position === 'searched') {\n      console.log('searchres click next');\n      anotherFetchSearch((globalCurrentPage += 1)).then(data => {\n        renderFilmCards(data.results);\n        paginationMarkup(data.page, data.total_pages);\n      });\n      return;\n    }\n  }\n\n  const page = Number(event.target.textContent);\n  globalCurrentPage = page;\n\n  if (cards.dataset.position === 'trends') {\n    onHomePageLoad(globalCurrentPage).then(data => {\n      renderFilmCards(data.results);\n      paginationMarkup(data.page, data.total_pages);\n    });\n    return;\n  }\n  if (cards.dataset.position === 'searched') {\n    console.log('searchres click next');\n    anotherFetchSearch(globalCurrentPage).then(data => {\n      renderFilmCards(data.results);\n      paginationMarkup(data.page, data.total_pages);\n    });\n    return;\n  }\n}","{\n  \"genres\": [\n    { \"id\": 28, \"name\": \"Action\" },\n    { \"id\": 12, \"name\": \"Adventure\" },\n    { \"id\": 16, \"name\": \"Animation\" },\n    { \"id\": 35, \"name\": \"Comedy\" },\n    { \"id\": 80, \"name\": \"Crime\" },\n    { \"id\": 99, \"name\": \"Documentary\" },\n    { \"id\": 18, \"name\": \"Drama\" },\n    { \"id\": 10751, \"name\": \"Family\" },\n    { \"id\": 14, \"name\": \"Fantasy\" },\n    { \"id\": 36, \"name\": \"History\" },\n    { \"id\": 27, \"name\": \"Horror\" },\n    { \"id\": 10402, \"name\": \"Music\" },\n    { \"id\": 9648, \"name\": \"Mystery\" },\n    { \"id\": 10749, \"name\": \"Romance\" },\n    { \"id\": 878, \"name\": \"Science Fiction\" },\n    { \"id\": 10770, \"name\": \"TV Movie\" },\n    { \"id\": 53, \"name\": \"Thriller\" },\n    { \"id\": 10752, \"name\": \"War\" },\n    { \"id\": 37, \"name\": \"Western\" }\n  ]\n}\n","const teamModalLinkEl = document.querySelector('.js-team-modal');\nconst teamModCloseEl = document.querySelector('[data-modal-team-close]');\nconst teamModalEl = document.querySelector('[data-modal-team]');\nconst backdrpTeamEl = document.querySelector('.backdrop-team');\nconst body = document.querySelector('body');\n// слухач на батьківський UL карток\nteamModalLinkEl.addEventListener('click', onModalOpenClick);\n\nfunction onModalOpenClick(event) {\n  event.preventDefault();\n  body.classList.add('noScroll');\n  teamModalEl.classList.remove('is-hidden');\n  teamModCloseEl.addEventListener('click', onModalCloseClick);\n  backdrpTeamEl.addEventListener('click', onBackdropElClick);\n  window.addEventListener('keydown', onEscBtnClick);\n}\n\nfunction onModalCloseClick() {\n  teamModalEl.classList.add('is-hidden');\n  body.classList.remove('noScroll');\n  teamModCloseEl.removeEventListener('click', onModalCloseClick);\n  backdrpTeamEl.removeEventListener('click', onBackdropElClick);\n  window.removeEventListener('keydown', onEscBtnClick);\n}\n\nfunction onBackdropElClick(event) {\n  if (event.target === backdrpTeamEl) {\n    body.classList.remove('noScroll');\n    onModalCloseClick();\n  }\n}\nfunction onEscBtnClick(event) {\n  if (event.code === 'Escape') {\n    body.classList.remove('noScroll');\n    onModalCloseClick();\n  }\n}\n","const backToTop = document.querySelector('.back_to_top');\n\nwindow.addEventListener('scroll', trackScroll);\nbackToTop.addEventListener('click', goToTop);\n\nfunction trackScroll() {\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    backToTop.classList.add('back_to_top-show');\n  }\n  if (scrolled < coords) {\n    backToTop.classList.remove('back_to_top-show');\n  }\n}\n\nfunction goToTop() {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n"],"names":["$bpxeT","parcelRequire","$0b1f61b1d1b5471b$exports","JSON","parse","$5eb44ca5d7130959$var$cards","document","querySelector","$5eb44ca5d7130959$var$searchFormEl","$5eb44ca5d7130959$var$searchFieldEl","$5eb44ca5d7130959$var$warningField","$5eb44ca5d7130959$var$searchResField","$5eb44ca5d7130959$var$globalCurrentPage","$5eb44ca5d7130959$var$movieDB","$1h2Gi","MovieDB","$5eb44ca5d7130959$var$_onSearchFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","event","globalCurrentPage1","inputSearchEl","preventDefault","dataset","position","target","elements","query","value","trim","console","log","length","textContent","setTimeout","currentTarget","reset","searchQuery","$5eb44ca5d7130959$var$anotherFetchSearch","apply","this","arguments","globalCurrentPage2","$5eb44ca5d7130959$var$_anotherFetchSearch","data","fetchCurrentPage","fetchTotalPages","fetchSearch","_ctx","sent","page","total_pages","$5eb44ca5d7130959$export$a88ca8237831132f","results","$5eb44ca5d7130959$export$e6243425577ce802","t0","$5eb44ca5d7130959$export$fc714631abe23e77","$5eb44ca5d7130959$var$_onHomePageLoad","fetchTrendMovies","$4smAb","loaderRender","films","markup","map","film","newGenres","genre_ids","id","genres","jsonID","name","join","genreStr","slice","rating","$2GCP7","numberConverter","vote_average","$dDDEV","poster_path","concat","release_date","innerHTML","$3ha8z","default","currentPage","allPages","beforePage","afterPage","afterTwoPage","$5eb44ca5d7130959$var$paginationBox","addEventListener","$5eb44ca5d7130959$var$_onPaginationHomeClick","nodeName","then","Number","$030efa6d71473853$var$teamModalLinkEl","$030efa6d71473853$var$teamModCloseEl","$030efa6d71473853$var$teamModalEl","$030efa6d71473853$var$backdrpTeamEl","$030efa6d71473853$var$body","$030efa6d71473853$var$onModalCloseClick","classList","add","remove","removeEventListener","$030efa6d71473853$var$onBackdropElClick","window","$030efa6d71473853$var$onEscBtnClick","code","$63ed40f8ddbf6759$var$backToTop","scrolled","pageYOffset","coords","documentElement","clientHeight","scrollTo","top","behavior"],"version":3,"file":"index.28f06ef1.js.map"}