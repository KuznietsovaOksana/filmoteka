{"mappings":"iiBAIAA,EAAA,SCJA,IAAAC,EAAAD,EAAA,S,+DAIA,IAAME,EAAQC,SAASC,cAAc,UAC/BC,EAAUF,SAASC,cAAc,UAGjCE,EAAcH,SAASC,cAAc,UACrCG,EAAeJ,SAASC,cAAc,sBACtCI,EAAUL,SAASC,cAAc,gBACjCK,EAAaN,SAASC,cAAc,aAEpCM,EAAuBP,SAASQ,eAAe,oBAC/CC,EAAsBT,SAASQ,eAAe,kBAC9CE,EAAsB,iBAG5B,EAAAC,EAAAC,gBAIAL,EAAqBM,iBAAiB,SAoBM,WACxC,IAAIC,EAAeC,KAAKC,MAAMC,aAAaC,QAAQR,IACnDS,QAAQC,IAAIN,GACZO,EAAgBP,E,IAtBpBL,EAAoBI,iBAAiB,SA0BE,WACnC,IAAIS,EAAcP,KAAKC,MAAMC,aAAaC,QAlCpB,mBAmCtBC,QAAQC,IAAIE,GACZD,EAAgBC,E,IA1BMnB,EAAdU,iBAAiB,S,SAmDGU,G,OAAjBC,EAAgBC,MAAAC,KAAAC,U,IA3CJ,IAArBC,EAAoBb,KAAKC,MAAMC,aAAaC,QAAQR,IAsBjB,SAAhCW,EAAgBQ,GACrB,IAAMC,EAASD,EAAME,KAAI,SAAAC,GAWrB,OANmBC,EAAAC,EAAA,IACZF,EAAI,CACPG,YAAa,kCAAmDC,OAAjBJ,EAAKG,aACpDE,OAAQL,EAAKM,WACbC,aAAcP,EAAKO,aAAaC,MAAM,EAAG,I,IAKjDtC,EAAQuC,UAAY,GACpB1C,EAAM0C,WAAY,EAAAC,EAAAC,SAAab,E,UAKpBN,I,OAAAA,EAAfS,EAAAnC,EAAA,CAAAmC,EAAAW,GAAAC,MAAA,SAAAC,EAAgCvB,G,kEAC5BA,EAAMwB,iBACFxB,EAAMyB,OAAOC,QAAQ,QACrB5C,EAAQ6C,UAAUC,OAAO,aACzB/C,EAAaS,iBAAiB,QAASuC,GACvC9C,EAAWO,iBAAiB,QAASwC,GACrCC,OAAOzC,iBAAiB,UAAW0C,GACnCpC,QAAQC,IAAI,sB,4CAPWK,MAAAC,KAAAC,U,CAY/B,SAASyB,IACL/C,EAAQ6C,UAAUM,IAAI,aACtBpD,EAAaqD,oBAAoB,QAASL,GAC1C9C,EAAWmD,oBAAoB,QAASJ,GACxCC,OAAOG,oBAAoB,UAAWF,E,CAG1C,SAASF,EAAkB9B,GACnBA,EAAMyB,SAAW1C,GACjB8C,G,CAIR,SAASG,EAAchC,GACA,WAAfA,EAAMmC,MACNN,G,CArEyB,IAA7BxB,EAAkB+B,QAClBtC,EAAgBO,E","sources":["src/library.js","src/js/library-cards.js"],"sourcesContent":["// import cardTemplate from './templates/film-card.hbs';\n// import './js/pagination';\n// import './js/to-top';\n// import './js/preloader';\nimport './js/theme-switch';\nimport './js/library-cards';\n","import { loaderRender } from './preloader';\nimport cardTemplate from '../templates/film-card.hbs';\nimport genres from './genres.json';\n\nconst cards = document.querySelector('.cards');\nconst emptyEl = document.querySelector('.empty');\n\n// const modalOpenEl = document.querySelector('[data-modal-open]');\nconst modalOpenEl = document.querySelector('.cards');\nconst modalCloseEl = document.querySelector('[data-modal-close]');\nconst modalEl = document.querySelector('[data-modal]');\nconst backdropEl = document.querySelector('.backdrop');\n\nconst watchedFilmListBtnEl = document.getElementById('js-WatchedButton');\nconst queuedFilmListBtnEl = document.getElementById('js-QueueButton');\nconst WATCHED_STORAGE_KEY = \"watched films\";\nconst QUEUE_STORAGE_KEY = \"films in queue\"\n\nloaderRender();\n\n\n\nwatchedFilmListBtnEl.addEventListener('click', onLSLoadWatched);\nqueuedFilmListBtnEl.addEventListener('click', onLSLoadQueue);\n\n// слухач на батьківський UL карток\nmodalOpenEl.addEventListener('click', onModalOpenClick);\n\n\n\n\n\n// Перевірка на наявність даних в ЛокалСторедж\n// Якщо є дані, тоді рендерим картки\nconst LS_WWATCHED_ARRAY = JSON.parse(localStorage.getItem(WATCHED_STORAGE_KEY));\nif (LS_WWATCHED_ARRAY.length !== 0) {\n    renderFilmCards(LS_WWATCHED_ARRAY);\n}\n\n\n\n// Функція витягує переглянуті фільми з ЛокалСторедж\nfunction onLSLoadWatched() {\n    let watchedFilms = JSON.parse(localStorage.getItem(WATCHED_STORAGE_KEY));\n    console.log(watchedFilms);\n    renderFilmCards(watchedFilms);\n}\n\n// Функція витягує фільми з черги з ЛокалСторедж\nfunction onLSLoadQueue() {\n    let queuedFilms = JSON.parse(localStorage.getItem(QUEUE_STORAGE_KEY))\n    console.log(queuedFilms);\n    renderFilmCards(queuedFilms);\n}\n\n// Функція, що підготовлює дані в картку для рендеру\nfunction renderFilmCards(films) {\n    const markup = films.map(film => {\n        // console.log(film);\n        // console.log(film.filmGenres);\n\n        // Формую підготовлений об'єкт даних для закидання в handlebar\n        const editedFilm = {\n            ...film,\n            poster_path: `https://image.tmdb.org/t/p/w500${film.poster_path}`,\n            genres: film.filmGenres,\n            release_date: film.release_date.slice(0, 4),\n        };\n        return editedFilm;\n    });\n\n    emptyEl.innerHTML = '';\n    cards.innerHTML = cardTemplate(markup);\n}\n\n\n// Функція відкриття модалки\nasync function onModalOpenClick(event) {\n    event.preventDefault();\n    if (event.target.closest('li')) {\n        modalEl.classList.remove('is-hidden');\n        modalCloseEl.addEventListener('click', onModalCloseClick);\n        backdropEl.addEventListener('click', onBackdropElClick);\n        window.addEventListener('keydown', onEscBtnClick);\n        console.log(\"I clicked on card\");\n    }\n}\n\n\nfunction onModalCloseClick() {\n    modalEl.classList.add('is-hidden');\n    modalCloseEl.removeEventListener('click', onModalCloseClick);\n    backdropEl.removeEventListener('click', onBackdropElClick);\n    window.removeEventListener('keydown', onEscBtnClick);\n}\n\nfunction onBackdropElClick(event) {\n    if (event.target === backdropEl) {\n        onModalCloseClick();\n    }\n}\n\nfunction onEscBtnClick(event) {\n    if (event.code === 'Escape') {\n        onModalCloseClick();\n    }\n}\n"],"names":["parcelRequire","$bpxeT","$7a281c26fced4abd$var$cards","document","querySelector","$7a281c26fced4abd$var$emptyEl","$7a281c26fced4abd$var$modalOpenEl","$7a281c26fced4abd$var$modalCloseEl","$7a281c26fced4abd$var$modalEl","$7a281c26fced4abd$var$backdropEl","$7a281c26fced4abd$var$watchedFilmListBtnEl","getElementById","$7a281c26fced4abd$var$queuedFilmListBtnEl","$7a281c26fced4abd$var$WATCHED_STORAGE_KEY","$4smAb","loaderRender","addEventListener","watchedFilms","JSON","parse","localStorage","getItem","console","log","$7a281c26fced4abd$var$renderFilmCards","queuedFilms","event","$7a281c26fced4abd$var$_onModalOpenClick","apply","this","arguments","$7a281c26fced4abd$var$LS_WWATCHED_ARRAY","films","markup","map","film","$parcel$interopDefault","$dDDEV","poster_path","concat","genres","filmGenres","release_date","slice","innerHTML","$3ha8z","default","$2TvXO","mark","_callee","preventDefault","target","closest","classList","remove","$7a281c26fced4abd$var$onModalCloseClick","$7a281c26fced4abd$var$onBackdropElClick","window","$7a281c26fced4abd$var$onEscBtnClick","add","removeEventListener","code","length"],"version":3,"file":"library.632aaab4.js.map"}